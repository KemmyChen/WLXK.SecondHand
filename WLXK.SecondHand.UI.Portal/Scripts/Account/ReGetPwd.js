$(function () { $("#dont").click(function () { ChangePic() }); $("#vaildPic").click(function () { ChangePic() }); $("input.user_input").focus(function () { $(this).next(".user_msg").css("display", "block") }); $("#pwd1").focus(function () { $("#tabpwd").css("display", "block"); setInterval(pwdget, 200) }); $("#pwd1").blur(function () { CheckPwd() }); $("#pwd2").focus(function () { setInterval(pwdIsTrue, 500) }); $("#pwd2").blur(function () { pwdIsTrue() }); function CheckPwd() { var pwd1 = $("#pwd1"); var div = $("#pwd1msg"); if (pwd1.val().length <= 0) { div.removeClass("user_msg"); div.addClass("regmsg"); div.css("display", "block"); div.text("请输入密码"); return false } else if (pwd1.val().length < 6 && pwd1.val().length > 0) { div.removeClass("user_msg"); div.addClass("regmsg"); div.css("display", "block"); div.text("密码不能小于6位"); return false } else { div.css("display", "none"); $('#pwd1').css("background", "url(/Content/images/success.png) no-repeat right"); return true } }; function pwdget() { $("#tabpwd td").css("backgroundColor", "#C4C4C4"); var len = CheckPwd1(); if ($("#pwd1").val().length > 0) { if (len <= 0) { } else if (len == 1) { $("#one").css("backgroundColor", "#F75733") } else if (len == 2) { $("#one").css("backgroundColor", "#F75733"); $("#two").css("backgroundColor", "#F75733") } else if (len == 3) { $("#one").css("backgroundColor", "#F75733"); $("#two").css("backgroundColor", "#F75733"); $("#three").css("backgroundColor", "#F75733") } else { alert('错误') } } }; function pwdIsTrue() { $("#pwd2msg").css("display", "none"); if ($("#pwd1").val() == $('#pwd2').val() && $("#pwd1").val().length > 0) { $('#pwd2').css("background", "url(/Content/images/success.png) no-repeat right"); return true } else { $('#pwd2').css("background", "url(/Content/images/reg_pwd.png) no-repeat right"); $("#pwd2msg").removeClass("user_msg"); $("#pwd2msg").addClass("regmsg"); $("#pwd2msg").css("display", "block"); $("#pwd2msg").text("两次密码输入不一致"); return false } }; function CheckPwd1() { var pwd1 = $("#pwd1").val(); var len = 0; if (/\d/.test(pwd1)) { len++ } if (/[a-zA-Z]/.test(pwd1)) { len++ } if (/[^a-zA-Z0-9]/.test(pwd1)) { len++ } if (pwd1.length < 6) { len-- } return len }; function CheckFrom() { if (CheckPwd() && pwdIsTrue()) { return true } return false } }); function ChangePic() { $("#vaildPic").attr("src", "GetValidateCode?key=" + Math.random()) }; function AfterSuccess(data) { if (data == "ok") { window.location.href = "/Account/Login" } else { alert(data); ChangePic() } };