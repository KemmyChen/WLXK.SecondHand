$(function () { SendEmail(); $("#resend").click(function () { SendEmail() }) }); function SendEmail() { var state = $("#status").val(); var myemail = $("#myemail").text(); var uid = $("#uid").text(); $('#fasongzhong').text("验证邮件发送中....."); $('#zhezhaoceng').css("display", "block"); $('#myemail').css("display", "none"); var href; if (state == "binding") { href = "/Account/ReBindingEmail" } else if (state == "register") { href = "/Account/ReSendEmail" } else if (state == "forget") { href = "/Account/ReFindEmail" } $.post(href, { emailurl: myemail, Uid: uid }, function (data) { $('#zhezhaoceng').css("display", "none"); if (data == '1') { $('#fasongzhong').text("验证邮件已发送至"); $('#myemail').css("display", "") } else { alert("邮件发送失败"); window.location.href = "/others/error" } }) }